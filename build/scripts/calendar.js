$(function(){function a(){var a=parseInt($("#calendar").attr("month"),10),t=parseInt($("#calendar").attr("year"),10);return{month:a,year:t}}function t(a,t){var e=new Date(a,t,1),n=e.getFullYear(),r=e.getMonth(),o=new Date(n,r,1).getDate(),c=new Date(n,r+1,0).getDate();return{firstDay:o,lastDay:c}}function e(a,e,n){$("#calendar")&&$("#calendar").remove();for(var o=$("<table>").attr("id","calendar").attr("month",a).attr("year",e),c=$("<tbody>"),l=($("<thead>").append($("<tr>").append($("<th>").html(r[a]+" "+e).addClass("text-center").addClass("color-success").attr("colspan",7))).appendTo(o),t(e,a)),d=$("<tr>"),p=l.firstDay;p<=l.lastDay;p+=1){for(var s=$("<td>").html(p),h=0;h<n.length;h+=1){var i=new Date(n[h]).getDate(),u=new Date(n[h]).getFullYear(),D=new Date(n[h]).getMonth();p===parseInt(i,10)&&parseInt(u,10)===e&&parseInt(D,10)===a&&s.addClass("car-available")}s.appendTo(d),p%7===0&&(c.append(d),d=$("<tr>"))}c.append(d),c.appendTo(o);var m=$("#calendar-container");m.append(o)}function n(a,t){var n="/car/"+o+"/calendar?month="+a+"&year="+t;$.getJSON(n,function(n){e(a,t,n)})}var r=["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],o=$("#car-details").attr("carId");$("#next-month").on("click",function(){var t,e,r=a();11===r.month?(e=r.year+1,t=0):(e=r.year,t=r.month+1),n(t,e)}),$("#previous-month").on("click",function(){var t,e,r=a();0===r.month?(e=r.year-1,t=11):(e=r.year,t=r.month-1),n(t,e)}),n((new Date).getMonth(),(new Date).getFullYear())});